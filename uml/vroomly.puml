
@startuml
left to right direction
'skinparam classAttributeIconSize 0

'========================
' Core domain
'========================
abstract class Vehicle {
  # year: String
  # brand: String
  # model: String
  # licensePlate: String
  # vin: String
  # MOTValidTill: Date
  # odometerKm: Double
  # seats: Int
  # color: String
  # status: VehicleStatus
  # category: VehicleCategory
  # costPerDay: Double
'  Replace for interface
  - createdAt: DateTime
  {derived} - isRentable: Boolean
  + reserve(renter: User, start: Date, end: Date): Reservation
  + addMaintenance(m: Maintenance): Boolean
  + isAvailable(start: Date, end: Date): Boolean
  + remove(): Boolean
}

class Car {
  - type: EngineType
}

class Maintenance {
  - startDate: Date
  - endDate: Date
  - cost: Double
  - description: String
  - odometerAtService: Double
  + getMaintenanceDetails(): Object
}

class Reservation {
  # startDate: Date
  # endDate: Date
  # totalCost: Double
  # status: ReservationStatus
  - paid: Boolean
'  Replace for interface
  - createdAt: DateTime
  + payReservation(): Boolean
  + cancelReservation(): Boolean
}

class User {
  - firstName: String
  - middleName: String
  - lastName: String
  - dob: Date
  - userName: String
  - password: String
'  Replace for interface
  - accountCreatedAt: DateTime
  - email: String
  + login(): String
  + resetPassword(): Boolean
  + removeAccount(): Boolean
}

class Image {
  - source: String
  - caption: String
  - createdAt: DateTime
}

interface iLocatable {
  + latitude: Decimal
  + longitude: Decimal
}

interface iCreatedAt {
    createdAt: DateTime
}

class RentableVehicles <<service>> {
  + getVehicles(filters): List<Vehicle>
}

class Location {
  + latitude: Decimal
  + longitude: Decimal
  - address: String
}

'========================
' Enums
'========================
enum EngineType {
  ICE
  BEV
  FCEV
}

enum VehicleStatus {
  Active
  InService
  InMaintenance
}

enum VehicleCategory {
  Car
  Van
  Truck
  SUV
}

enum ReservationStatus {
  Pending
  Confirmed
  Active
  Completed
  Cancelled
}

'========================
' Associations (lines)
'========================
Car --|> Vehicle
Car ..> EngineType : type

Vehicle *-- "0..*" Maintenance : maintenances
Vehicle o-- "0..*" Reservation : reservations
Vehicle o-- "0..*" Image : images
Vehicle --> "1" User : owner
Vehicle ..|> iLocatable
Vehicle --> "0..1" Location : currentLocation

Reservation --> "1" Vehicle : vehicle
Reservation --> "1" User : renter

RentableVehicles ..> Car : queries

'========================
' Enum dependencies (lines from classes to enums)
'========================
Vehicle ..> VehicleStatus : status
Vehicle ..> VehicleCategory : category
Reservation ..> ReservationStatus : status

@enduml